(window["webpackJsonpreact-movies"]=window["webpackJsonpreact-movies"]||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},39:function(e,t,a){e.exports=a(71)},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(11),o=a.n(l),c=(a(44),a(19)),s=a.n(c),i=(a(45),a(4)),u=a(5),m=a(6),d=a(7),p=a(8),f=(a(46),a(18)),v=a(15),g=a(17),h=a.n(g),E=a(16),b=a(2);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var N={activePage:1,data:{results:[]},sort:{label:null,value:"popularity.desc"},genres:[],selectedGenre:{id:null,label:null,value:null},selectedYear:{label:null,value:null},showPreloader:!1,showError:!1,detailsInfo:{}},y=a(37),j=Object(E.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DATA":return w({},e,{data:t.data});case"FETCH_GENRES":return w({},e,{genres:t.data});case"SET_GENRE":return w({},e,{selectedGenre:t.data});case"SET_YEAR":return w({},e,{selectedYear:t.data});case"SET_SORTING":return w({},e,{sort:t.data});default:return w({},e)}},Object(E.a)(y.a)),S=function(e){return{type:"FETCH_DATA",data:e}},_=function(e){return function(t){t(function(e){return console.log(e),{type:"SET_GENRE",data:e}}(e)),t(k(1))}},G=function(e){return function(t){t(function(e){return console.log(e),{type:"SET_YEAR",data:e}}(e)),console.log("filter with year action:",e),t(k(1))}},P=function(e){return function(t){t(function(e){return console.log(e),{type:"SET_SORTING",data:e}}(e)),t(k(1))}},D=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t="&api_key=5874acfd11651a28c55771624f7021f4&language=en-EN",a=null!==j.getState().selectedGenre.id?"&with_genres="+j.getState().selectedGenre.id:"",n=null!==j.getState().selectedYear.value?"&year="+j.getState().selectedYear.value:"",r=null!==j.getState().sort.value?"sort_by="+j.getState().sort.value:"",l="&page="+e,o="https://api.themoviedb.org/3/discover/movie?"+r+t+l+a+n;return o},k=function(e){return function(t){return h.a.get(D(e)).then(function(e){console.log("renew:",e),t(S({movies:e.data.results,page:e.data.page,total_pages:e.data.total_pages}))}).catch(function(e){throw e})}},T=[{value:"popularity.desc",label:"\u041f\u043e \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438"},{value:"vote_average.desc",label:"\u041f\u043e \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0443"},{value:"revenue.desc",label:"\u041f\u043e \u043a\u0430\u0441\u0441\u043e\u0432\u044b\u043c \u0441\u0431\u043e\u0440\u0430\u043c"}],Y=[],C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={selectedOption:{label:"\u041f\u043e \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438",value:"popularity.desc"},selectedYear:{label:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0434",value:""},selectedGenre:{label:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0436\u0430\u043d\u0440",value:""}},a.componentDidMount=function(){},a.sortSelect=function(e){var t=a.props.sortWithSelect;a.setState({selectedOption:e}),console.log("Option selected:",e),t(e)},a.selectGenre=function(e){var t=a.props.filterWithGenre;a.setState({selectedGenre:e}),console.log("Genre selected:",e,a.state),t(e)},a.selectYear=function(e){var t=a.props.filterWithYear;a.setState({selectedYear:e}),console.log("Year selected:",e,a.state),t(e)},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){for(var e=this.state,t=e.selectedOption,a=e.selectedYear,n=e.selectedGenre,l=this.props,o=l.genres,c=l.state1,i=2019;i>=1901;i--)Y.push({value:i,label:i});return console.log("state:",c),r.a.createElement("div",{className:"header-container"},r.a.createElement("div",{className:"header-form"},r.a.createElement("div",{className:"header-dropdowns"},r.a.createElement("img",{src:s.a,className:"logo",alt:"logo"}),r.a.createElement("div",{className:"select-container"},r.a.createElement("span",null,"\u0416\u0430\u043d\u0440\u044b"),r.a.createElement(f.a,{className:"select",options:o,value:n,onChange:this.selectGenre})),r.a.createElement("div",{className:"select-container"},r.a.createElement("span",null,"\u0413\u043e\u0434"),r.a.createElement(f.a,{className:"select",options:Y,value:a,onChange:this.selectYear})),r.a.createElement("div",{className:"select-container"},r.a.createElement("span",null,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),r.a.createElement(f.a,{className:"select",options:T,value:t,onChange:this.sortSelect})))))}}]),t}(n.Component),A=Object(v.b)(function(e){return{sort:e.sort,genres:e.genres,state1:e}},function(e){return{filterWithGenre:function(t){return e(_(t))},filterWithYear:function(t){return e(G(t))},sortWithSelect:function(t){return e(P(t))}}})(C),R=(a(68),function(e){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footer-content"},r.a.createElement("div",{className:"footer-menu"},r.a.createElement("h3",null,"This is footer"),r.a.createElement("ul",null,r.a.createElement("li",{className:"footer-item"},"Email: jonsmusev@gmail.com"),r.a.createElement("li",{className:"footer-item"},"LinkedIN"),r.a.createElement("li",{className:"footer-item"},"Facebook"))),r.a.createElement("div",{className:"footer-menu"},r.a.createElement("ul",null,r.a.createElement("li",null,"1"),r.a.createElement("li",null,"2"),r.a.createElement("li",null,"3")))))}),W=(a(69),function(e){var t=e.movie;return r.a.createElement("div",{className:"movie-list-item"},r.a.createElement("div",{className:"movie-poster"},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w200"+t.poster_path})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("h3",{className:"movie-title"},t.title),r.a.createElement("ul",null,r.a.createElement("li",{className:"rating-genre"},t.genre),r.a.createElement("li",{className:"rating-score"},r.a.createElement("h5",null,"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430: "),t.vote_average),r.a.createElement("li",{className:"movie-description"},t.overview),r.a.createElement("li",{className:"movie-directors"},r.a.createElement("h5",null,"Directors: "),t.directors),r.a.createElement("li",{className:"movie-stars"},r.a.createElement("h5",null,"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430: "),t.release_date))))}),I=function(e){var t=e.movies;return r.a.createElement("div",{className:"movie-list"},t&&t.map(function(e){return r.a.createElement(W,{movie:e,key:e.id})}))},F=(a(70),function(e,t){var a=[];if(t<=10)for(var n=1;n<=t;n++)a.push(n);else if(e<5){for(var r=1;r<=e;r++)a.push(r);a.push(e+1,e+2,"...",t-2,t-1,t)}else if(e>t-4){a.push(1,2,"...",e-2,e-1);for(var l=e;l<=t;l++)a.push(l)}else a.push(1,2,"...",e-1,e,e+1,"...",t-1,t);return a}),H=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).listPages=function(){var e=a.props,t=e.page,n=e.totalPages;return F(t,n).map(function(e,n){return console.log(e),r.a.createElement("button",{value:e,className:e==t?"active":null,onClick:"..."!=e?a.handleChange:null},e)})},a.handleChange=function(e){var t=a.props.renewPageData;console.log(e.target.value),t(e.target.value)},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props;e.page,e.renewPageData;return r.a.createElement("div",{className:"pagination"},this.listPages())}}]),t}(n.Component),M=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchGenresData,a=e.fetchInitialData;e.renewPageData;a(),t()}},{key:"render",value:function(){var e=this.props,t=e.movies,a=(e.state1,e.genres,e.selectedGenre),n=e.page,l=e.totalPages,o=e.renewPageData;return console.log(a),r.a.createElement("div",{className:"main-window"},r.a.createElement("p",null,a),r.a.createElement(I,{movies:t}),r.a.createElement("div",{className:"spinner"}),r.a.createElement(H,{page:n,totalPages:l,renewPageData:o}))}}]),t}(n.Component),x=Object(v.b)(function(e){return{selectedGenre:e.selectedGenre.value,genres:e.genres,page:e.data.page,totalPages:e.data.total_pages,movies:e.data.movies,state1:e}},function(e){return{fetchInitialData:function(){return e(function(e){return h.a.get(D(1)).then(function(t){console.log(t),e(S({movies:t.data.results,page:t.data.page,total_pages:t.data.total_pages}))}).catch(function(e){throw e})})},fetchGenresData:function(){return e(function(e){return h.a.get("https://api.themoviedb.org/3/genre/movie/list?api_key=5874acfd11651a28c55771624f7021f4&language=ru_RU").then(function(t){console.log("fetched genres",t);var a=[];t.data.genres.map(function(e){return a.push({value:e.name,label:e.name,id:e.id})}),e({type:"FETCH_GENRES",data:a})}).catch(function(e){throw e})})},renewPageData:function(t){return e(k(t))}}})(M);var B=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(A,null),r.a.createElement(x,null),r.a.createElement(R,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(v.a,{store:j},r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.56bf192e.chunk.js.map